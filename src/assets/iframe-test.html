<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PDF Generation Preview</title>
  <style>
    body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; }

    #linkedin-scene {
      width: 1080px; height: 1080px;
      position: absolute; top: 0; left: 0;
      transform-origin: top left;
    }

    .ln-slide {
      width: 1080px; height: 1080px;
      display: flex;
      flex-direction: column;
      padding: 90px;
      box-sizing: border-box;
      font-family: 'Arial', sans-serif;
      transition: all 0.3s ease;
    }

    /* --- POSITIONS --- */
    .centered { align-items: center; justify-content: center; text-align: center; }
    .top-left { align-items: flex-start; justify-content: flex-start; text-align: left; padding-top: 150px; }
    .bottom-right { align-items: flex-end; justify-content: flex-end; text-align: right; padding-bottom: 150px; }
    .magazine { align-items: flex-start; justify-content: flex-end; text-align: left; padding-bottom: 120px; }

    /* --- ELEMENTS --- */
    .ln-title {
      font-weight: 900;
      text-transform: uppercase;
      margin: 0;
      line-height: 1.1;
      width: 100%;
      /* Font size is controlled via JS */
    }

    .ln-sep {
      width: 220px;
      height: 14px;
      background-color: #0b67c2;
      margin: 40px 0;
    }
    .centered .ln-sep { margin: 40px auto; }

    .ln-desc {
      font-size: 40px;
      line-height: 1.4;
      margin-top: 20px;
    }
  </style>
</head>
<body>

<div id="linkedin-scene">
  <div class="ln-slide centered" id="slide-container">
    <div class="ln-title" id="preview-title">TITLE</div>
    <div class="ln-sep" id="preview-sep"></div>
    <div class="ln-desc" id="preview-content">Description text here...</div>
  </div>
</div>

<script>
  /**
   * Adjusts the scale of the 1080px canvas to fit the current iframe width
   */
  function adaptScale() {
    const scene = document.getElementById('linkedin-scene');
    const scale = window.innerWidth / 1080;
    scene.style.transform = `scale(${scale})`;
  }

  window.onresize = adaptScale;
  window.onload = adaptScale;

  /**
   * Listens for messages from the Angular parent component
   */
  window.addEventListener('message', (event) => {
    const p = event.data.payload;
    if (!p) return;

    const container = document.getElementById('slide-container');
    const title = document.getElementById('preview-title');
    const content = document.getElementById('preview-content');

    // 1. UPDATE CONTENT
    title.innerText = p.eventName || 'TITLE';
    content.innerText = p.eventData || '';

    // 2. UPDATE POSITION
    container.className = `ln-slide ${p.selectedLayout || 'centered'}`;

    // 3. UPDATE TYPOGRAPHY
    // Applying the unit 'px' is crucial for the browser to render the font-size change
    title.style.fontSize = (p.fontSize || 85) + 'px';
    title.style.fontFamily = p.fontFamily || 'Arial';
    title.style.color = p.textColor || '#000000';
    content.style.color = p.textColor || '#000000';

    // 4. UPDATE BACKGROUND (SOLID OR GRADIENT)
    if (p.useGradient) {
      container.style.background = `linear-gradient(135deg, ${p.color1}, ${p.color2})`;
    } else {
      container.style.background = p.color1;
    }
  });
</script>
</body>
</html>
